{"version":3,"sources":["../../../../src/hooks/useActiveSection.ts","../../../../src/utils/generateTOC.ts","../../../../src/components/service-details/TableOfContent.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\n/**\r\n * Custom hook to track the currently active section based on scroll position\r\n * @param sectionIds - Array of section IDs to track\r\n * @param options - Intersection Observer options\r\n * @returns The ID of the currently active section\r\n */\r\nexport const useActiveSection = (sectionIds: string[], options: IntersectionObserverInit = {}): string | null => {\r\n  const [activeSection, setActiveSection] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const defaultOptions: IntersectionObserverInit = {\r\n      rootMargin: '-10% 0px -60% 0px', // More sensitive detection for better UX\r\n      threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],\r\n      ...options,\r\n    };\r\n\r\n    const handleIntersect = (entries: IntersectionObserverEntry[]) => {\r\n      // Find the most visible section\r\n      const visibleSections = entries\r\n        .filter((entry) => entry.isIntersecting)\r\n        .sort((a, b) => {\r\n          // Sort by intersection ratio first, then by position\r\n          if (Math.abs(a.intersectionRatio - b.intersectionRatio) < 0.1) {\r\n            // If intersection ratios are similar, prefer the one closer to the center\r\n            const aCenter = a.boundingClientRect.top + a.boundingClientRect.height / 2;\r\n            const bCenter = b.boundingClientRect.top + b.boundingClientRect.height / 2;\r\n            const viewportCenter = window.innerHeight / 2;\r\n            return Math.abs(aCenter - viewportCenter) - Math.abs(bCenter - viewportCenter);\r\n          }\r\n          return b.intersectionRatio - a.intersectionRatio;\r\n        });\r\n\r\n      if (visibleSections.length > 0) {\r\n        const topSection = visibleSections[0];\r\n        setActiveSection(topSection.target.id);\r\n      }\r\n    };\r\n\r\n    const observer = new IntersectionObserver(handleIntersect, defaultOptions);\r\n\r\n    // Small delay to ensure elements are rendered\r\n    const timeoutId = setTimeout(() => {\r\n      sectionIds.forEach((id) => {\r\n        const element = document.getElementById(id);\r\n        if (element) {\r\n          observer.observe(element);\r\n        }\r\n      });\r\n    }, 100);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      observer.disconnect();\r\n    };\r\n  }, [sectionIds, options]);\r\n\r\n  return activeSection;\r\n};\r\n\r\nexport default useActiveSection;\r\n","export interface TOCItem {\r\n  id: string;\r\n  title: string;\r\n  level: number;\r\n}\r\n\r\n/**\r\n * Generates table of contents from markdown content\r\n * @param markdownContent - The markdown content string\r\n * @returns Array of TOC items with id, title, and level\r\n */\r\nexport const generateTOC = (markdownContent: string): TOCItem[] => {\r\n  const headingRegex = /^(#{1,6})\\s+(.+)$/gm;\r\n  const toc: TOCItem[] = [];\r\n  let match;\r\n\r\n  while ((match = headingRegex.exec(markdownContent)) !== null) {\r\n    const level = match[1].length; // Number of # characters\r\n    const title = match[2].trim();\r\n\r\n    // Generate slug-like id from title\r\n    const id = title\r\n      .toLowerCase()\r\n      .replace(/[^\\w\\s-]/g, '') // Remove special characters except spaces and hyphens\r\n      .replace(/\\s+/g, '-') // Replace spaces with hyphens\r\n      .replace(/-+/g, '-') // Replace multiple hyphens with single hyphen\r\n      .trim();\r\n\r\n    toc.push({\r\n      id,\r\n      title,\r\n      level,\r\n    });\r\n  }\r\n\r\n  return toc;\r\n};\r\n\r\nexport default generateTOC;\r\n","'use client';\r\n\r\nimport { useActiveSection } from '@/hooks/useActiveSection';\r\nimport { generateTOC } from '@/utils/generateTOC';\r\nimport { useLenis } from 'lenis/react';\r\nimport Link from 'next/link';\r\nimport { useCallback, useMemo } from 'react';\r\nimport RevealAnimation from '../animation/RevealAnimation';\r\n\r\ninterface TableOfContentProps {\r\n  markdownContent: string;\r\n}\r\n\r\nconst TableOfContent = ({ markdownContent }: TableOfContentProps) => {\r\n  const lenis = useLenis();\r\n\r\n  // Generate TOC from markdown content\r\n  const tocItems = useMemo(() => generateTOC(markdownContent), [markdownContent]);\r\n\r\n  // Get section IDs for tracking active section\r\n  const sectionIds = useMemo(() => tocItems.map((item) => item.id), [tocItems]);\r\n\r\n  // Track currently active section\r\n  const activeSection = useActiveSection(sectionIds);\r\n\r\n  // Handle smooth scroll to section\r\n  const handleScrollToSection = useCallback(\r\n    (e: React.MouseEvent<HTMLAnchorElement>, targetId: string) => {\r\n      e.preventDefault();\r\n      if (lenis) {\r\n        lenis.scrollTo(`#${targetId}`, {\r\n          offset: -100,\r\n          duration: 1.2,\r\n          easing: (t: number) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\r\n        });\r\n      }\r\n    },\r\n    [lenis],\r\n  );\r\n  return (\r\n    <RevealAnimation delay={0.3}>\r\n      <div className=\"table-of-contents hidden w-full lg:sticky lg:top-20 lg:block lg:max-w-[449px]\">\r\n        <div className=\"bg-background-1 dark:bg-background-6 w-full space-y-4 rounded-[20px] p-11\">\r\n          <h3 className=\"text-heading-5\">Table of Contents</h3>\r\n          <ul className=\"table-of-list w-full\">\r\n            {tocItems.map((item, index) => {\r\n              const isActive = activeSection === item.id;\r\n              const isLastItem = index === tocItems.length - 1;\r\n\r\n              return (\r\n                <li key={item.id}>\r\n                  <Link\r\n                    href={`#${item.id}`}\r\n                    onClick={(e) => handleScrollToSection(e, item.id)}\r\n                    className={`group -mx-2 flex items-center justify-between rounded-lg px-2 py-4 transition-all duration-300 ease-out hover:bg-gray-50/50 dark:hover:bg-gray-800/30 ${\r\n                      !isLastItem && 'border-b-stroke-4 dark:border-b-stroke-7 border-b'\r\n                    }`}>\r\n                    <span\r\n                      className={`text-lg leading-[27px] transition-all duration-300 ease-out ${\r\n                        isActive\r\n                          ? 'text-secondary dark:text-accent translate-x-1 transform font-medium'\r\n                          : 'text-secondary/60 dark:text-accent/60 group-hover:text-secondary/80 dark:group-hover:text-accent/80 font-normal'\r\n                      }`}\r\n                      style={{ paddingLeft: `${(item.level - 2) * 16}px` }} // Indent based on heading level\r\n                    >\r\n                      {item.title}\r\n                    </span>\r\n                    <span\r\n                      className={`transform transition-all duration-300 ease-out ${\r\n                        isActive\r\n                          ? 'translate-x-0 scale-100 opacity-100'\r\n                          : 'translate-x-2 scale-95 opacity-0 group-hover:translate-x-0 group-hover:scale-100 group-hover:opacity-60'\r\n                      }`}>\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width={24} height={25} viewBox=\"0 0 24 25\" fill=\"none\">\r\n                        <path\r\n                          d=\"M10 8.5L14 12.5L10 16.5\"\r\n                          stroke=\"#1A1A1C\"\r\n                          strokeOpacity=\"0.6\"\r\n                          strokeWidth=\"1.5\"\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                        />\r\n                      </svg>\r\n                    </span>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </RevealAnimation>\r\n  );\r\n};\r\nTableOfContent.displayName = 'TableOfContent';\r\nexport default TableOfContent;\r\n"],"names":[],"mappings":"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"}